{% extends "base.html" %}


    {% block title %}Buscar{% endblock %}


	

{% block content %}




		Bienvenido {{ user.username }}
		
		

		
		<form action="{% url productos:buscar_productos %}" method="get">
		{{ form.as_p }}
		<input type="submit" value="Submit" />
		</form>


 	<div id="content"></div>
 	<div id="page-selection"></div>




<!--
<script>
    $('#page-selection').bootpag({
    total: {{ listado_productos|length }},
    page: 1,
    maxVisible: 10
    }).on('page', function(event, num){
    $("#content").html("productos/buscar/page/" + num); // or some ajax content loading...
    
    {% for producto in listado_productos %}
    
    	var nombre = {{ producto.nombre }} 
    
    {% endfor %}

    });


</script>


-->

<script type="text/javascript">
function ajax_get_update()
    {
       $.get(url, function(results){
          //get the parts of the result you want to update. Just select the needed parts of the response
          var table = $("table", results);
          var span = $("span.step-links", results);

          //update the ajax_table_result with the return value
          $('#ajax_table_result').html(table);
          $('.step-links').html(span);
        }, "html");
    }

//bind the corresponding links in your document to the ajax get function
$( document ).ready( function() {
    $( '.step-links #prev' ).click( function(e) {
        e.preventDefault();
        url = ($( '.step-links #prev' )[0].href);
        ajax_get_update();
    });
    $( '.step-links #next' ).click( function(e) {
        e.preventDefault();
        url = ($( '.step-links #next' )[0].href);
        ajax_get_update();

    });
});

//since the links are reloaded we have to bind the links again
//to the actions
$( document ).ajaxStop( function() {
    $( '.step-links #prev' ).click( function(e) {
        e.preventDefault();
        url = ($( '.step-links #prev' )[0].href);
        ajax_get_update();
    });
    $( '.step-links #next' ).click( function(e) {
        e.preventDefault();
        url = ($( '.step-links #next' )[0].href);
        ajax_get_update();
    });
});
</script>


{% load endless %}

{% paginate objects %}
{% for object in objects %}
     {{ object.page }}
    {# your code to show the entry #}
{% endfor %}
{% show_pages %}

 <!--
    /productos/producto/{{ producto.id }}
   -->
<!--

{% if productos %}

{% for producto in productos %}
    {# Each "producto" is a producto model object. #}
    
    <a href="{% url productos:detalle producto.id  %}">{{ producto.nombre|upper }}<br /></a>
    
   
{% endfor %}

<ul class="pagination">
    <li>
        {% if productos.has_previous %}
            <a href="?page={{ productos.previous_page_number }}&buscar={{ buscar }}&region={{ region }}">&laquo;</a>
        {% endif %}
    </li>
    
   
 {% for i in productos.paginator.page_range %}
  {% ifequal i productos.number %}
    <li class="active"><a href="?page={{ i }}&buscar={{ buscar }}&region={{ region }}">{{ i }} </a></li>
  {% else %}
    <li class=""><a href="?page={{ i }}&buscar={{ buscar }}&region={{ region }}">{{ i }} </a></li>
  {% endifequal %} 
{% endfor %}


    
	
    
     <li>
        {% if productos.has_next %}
            <a href="?page={{ productos.next_page_number }}&buscar={{ buscar }}&region={{ region }}">&raquo;</a>
        {% endif %}
       </li>
</ul>




{% else %}
	    <p>No existen productos</p>
	{% endif %}
-->



{% endblock %}

